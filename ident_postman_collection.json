{
  "info": {
    "_postman_id": "592c2321-2ebe-4314-9ccc-a62b533b4a95",
    "name": "Ident",
    "description": "Ident is a microservice providing identity, authentication and authorization services for users, applications and organizations.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Applications",
      "item": [
        {
          "name": "Create application",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "35eee88c-ce37-4435-a895-04376d52157a",
                "exec": [
                  "const response = pm.response.json();",
                  "",
                  "pm.environment.set(\"application_id\", response.id);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "f6843f3c-17db-4244-9fd3-fae27fe6e29c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"testapplication\"\n    }"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List applications",
          "id": "6f8769df-84bf-4ddd-bf90-16595731d7b4",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get application details",
          "id": "d19a8a3c-6ac7-457b-9a28-d30978d48074",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications/{{application_id}}",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications",
                "{{application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Associate user to application",
          "id": "80349d08-aca6-40c3-a856-f97aa235db94",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\":\"{{user_id}}\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications/{{application_id}}/users",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications",
                "{{application_id}}",
                "users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create application user",
          "id": "9886fd03-52f2-49a3-b151-476070498b5c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\":\"user@provide.local\",\n    \"first_name\":\"John\",\n    \"last_name\": \"Doe\",\n    \"password\": \"12345\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications/{{application_id}}/users",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications",
                "{{application_id}}",
                "users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List application users",
          "id": "6cb45150-e18d-4d9f-86df-8bcb7bc8bec9",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text",
                "disabled": true
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications/{{application_id}}/users",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications",
                "{{application_id}}",
                "users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update application",
          "id": "db56d09a-5e7b-4db8-8b4b-c0640a1e3179",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"asdfasdfadsfadsf\",\n    \"description\": \"{{application_description}}\",\n    \"type\": \"{{application_type}}\",\n    \"hidden\": true\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications/{{application_id}}",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications",
                "{{application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete application",
          "id": "ba0b05e3-f70a-483c-9b01-532acb08bd55",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "https://ident.provide.services/api/v1/applications/{{application_id}}",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "applications",
                "{{application_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "16db9c28-5064-4689-9cbc-2adb28209399"
    },
    {
      "name": "Organizations",
      "item": [
        {
          "name": "List organizations",
          "id": "56c606cf-f936-45c7-9e76-39fa268be6a0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/organizations",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "organizations"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3abdac60-f0d7-497d-b84e-719700139f9b",
                "exec": [
                  "const response = pm.response.json();",
                  "",
                  "pm.environment.set(\"organization_id\", response.id);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "d5ac2b51-40df-43bc-b45d-0fdd9e9a8b40",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"test_org\",\n    \"description\": \"organization for testing\"\n\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/organizations",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "organizations"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get organization details",
          "id": "4b72660b-820f-4bb5-91a5-cb78b5454d45",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/organizations/{{organization_id}}",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "organizations",
                "{{organization_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update organization details",
          "id": "9d675543-f1dd-4a79-9e5d-e30f35d3f9c5",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\":\"updated org name\",\n    \"description\": \"updated description\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/organizations/{{organization_id}}",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "organizations",
                "{{organization_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "40e000c9-75b4-4e89-87f6-15df99c7279b"
    },
    {
      "name": "Tokens",
      "item": [
        {
          "name": "Authorize long-term token",
          "id": "64dfbe15-a979-446a-a0fa-7349f93de57d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \n     \"scope\": \"offline_access\",\n     \"user_id\": \"{{user_id}}\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/tokens",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "tokens"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List tokens",
          "id": "097452ef-816e-4ad7-9b66-8ce996e55975",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/tokens",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "tokens"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Revoke token",
          "id": "646cf7e6-5d61-4e15-8c8b-5b8fdb4418f6",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "https://ident.provide.services/api/v1/tokens/f2202ba1-e2af-4505-9b1a-53e1ce8de904",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "tokens",
                "f2202ba1-e2af-4505-9b1a-53e1ce8de904"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Authorize application token",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2a7a4ac3-cad3-40ec-adbe-31c74731fa93",
                "exec": [
                  "const response = pm.response.json();",
                  "",
                  "pm.environment.set(\"jwt_token_application\", response.access_token);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "ded5c301-e5eb-464c-8a5a-ac4692192083",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \n     \"scope\": \"offline_access\",\n     \"application_id\": \"{{application_id}}\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/tokens",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "tokens"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Authorize organization token",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "578c9577-d7e3-4a56-b556-0a78e9fffa20",
                "exec": [
                  "const response = pm.response.json();",
                  "",
                  "pm.environment.set(\"jwt_token_organization\", response.token.token);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "17e2ec05-f2eb-4377-817a-f54be92b086c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \n     \"scope\": \"offline_access\",\n     \"organization_id\": \"{{organization_id}}\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/tokens",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "tokens"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Authentication",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a3d6630e-560c-46c9-90ba-d93c94d40125",
                "exec": [
                  "const response = pm.response.json();",
                  "",
                  "pm.environment.set(\"jwt_token\", response.token.token), (\"user_id\", response.user.id);",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "60e5be1a-5d57-46d0-ab31-0fa103e8abcd",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{email}}\", \n    \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/authenticate",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "authenticate"
              ]
            },
            "description": "Sends email & password to Ident. Token is retrieved and stored in environment variables as jwt_token"
          },
          "response": []
        }
      ],
      "id": "512a0429-8dc1-4cf0-a968-6251d5974864"
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "List users Copy",
          "id": "efe7f66e-e5e2-4c5c-9573-f8388f21895d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/users",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "users"
              ],
              "query": [
                {
                  "key": "email",
                  "value": "daven@provide.services",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create user",
          "id": "0e51c007-e4e7-4411-bc0b-60d365d34616",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\":\"user@provide.local\",\n    \"first_name\":\"John\",\n    \"last_name\":\"Doe\",\n    \"password\":\"12345\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/users",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update user",
          "id": "06bd1f7b-388e-4622-acc1-bb3ce8acbe7b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\":\"user@provide.local\",\n    \"first_name\":\"John\",\n    \"last_name\":\"Doe\",\n    \"password\":\"12345\"\n}"
            },
            "url": {
              "raw": "https://ident.provide.services/api/v1/tokens",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "tokens"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get user detail",
          "id": "e5f99e15-c3ad-41b3-9d36-c39d4e7d5e6f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              },
              {
                "key": "name",
                "value": "{{name}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "https://ident.provide.services/api/v1/users/{{user_id}}",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "users",
                "{{user_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete user",
          "id": "a1561df6-205a-47fc-8188-3cf2c6fe8451",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "content-type",
                "value": "application/json"
              },
              {
                "key": "authorization",
                "value": "bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "https://ident.provide.services/api/v1/tokens/{{user_id}}",
              "protocol": "https",
              "host": [
                "ident",
                "provide",
                "services"
              ],
              "path": [
                "api",
                "v1",
                "tokens",
                "{{user_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "258c97e1-864e-4726-8645-b5d625ae568c"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "f4e390ef-4319-498d-81c6-d1f476282cd9",
        "type": "text/javascript",
        "exec": [
          "pm.sendRequest({",
          "    url: \"https://ident.provide.services/api/\" + 'v1/authenticate',",
          "    method: 'POST',",
          "    header: {",
          "        'content-type': 'application/json',",
          "    },",
          "    body: {",
          "        mode: 'raw',",
          "        raw: JSON.stringify({ email: pm.environment.get(\"email\"), password: pm.environment.get(\"password\") })",
          "    }",
          "}, function (err, res) {",
          "   pm.environment.set(\"jwt_token\", res.json().token.token)",
          "});"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "f02dbf58-7135-406c-8806-b264276c324b",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ]
}